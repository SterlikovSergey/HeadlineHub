# HeadlineHub

## Описание
HeadlineHub — это RESTful-приложение для управления новостями. Приложение позволяет выполнять CRUD-операции с новостями и комментариями. Оно состоит из двух модулей:
- **API**: отвечает за взаимодействие с внешним миром через REST-контроллеры, управление базой данных и обработку исключений.
- **Core**: содержит бизнес-логику и реализует взаимодействие через Feign Client.

## Архитектура
Проект построен на основе модульного подхода:
- Модуль **API** знает о модуле **Core** и использует Feign Client для вызова его сервисов.
- Модуль **Core** изолирован от модуля **API** и предоставляет только бизнес-логику.

## Основные возможности
- **CRUD для работы с новостями**:
    - Создание, просмотр, обновление и удаление новостей.
- **CRUD для работы с комментариями**:
    - Создание, просмотр, обновление и удаление комментариев.
- **Кэширование**:
    - Реализация кэша с поддержкой алгоритмов **LRU** и **LFU**.
    - Настройки кэша задаются через файл `application.yml`.
- **Обработка исключений**:
    - Логирование исключений и их интерпретация в REST-ответы.
    - Реализация в виде Spring Boot Starter.
- **Логирование**:
    - Аспектное логирование запросов и ответов на уровне контроллеров.
    - Логирование по уровням в отдельных слоях приложения (контроллеры, сервисы, репозитории).
    - Настройки реализованы с помощью `logback` и выделены в отдельный Spring Boot Starter logger.
  ```gradle
  implementation 'ru.clevertec:logger:0.0.4-SNAPSHOT'
  ```

## Основные технологии
- **Java 21**
- **Spring Boot 3.x**
- **Gradle**
- **PostgreSQL**
- **Liquibase**
- **Feign Client**
- **Spring AOP** (для логирования)
- **JUnit + Testcontainers**
- **Logback**

## Настройки
### Основные настройки приложения
Файл: `application.yml`
```yaml
spring:
  application:
    name: headlineHub

  profiles:
    active: prod # Возможные значения: prod, test

app:
  cache:
    algorithm: LRU # Возможные значения: LRU, LFU
    max-size: 1000

logging:
  level:
    root: INFO
    ru.clevertec: DEBUG

logger:
  monitor:
    enabled: true # Возможные значения: true, false
```


---

### **Возможности для будущей реализации**
1. **Docker и Docker Compose:**
  - Планы по контейнеризации приложения:
    - Dockerfile для каждого модуля
    - Запуск приложения в контейнерах.
    - Запуск PostgreSQL и микросервис headlineHub с помощью docker-compose.yml
    - Настройки взаимодействие между контейнерами.

2. **Redis:**
  - Реализовать переключение между LRU/LFU и Redis с использованием профилей.
    - Redis в качестве провайдера кэша.
      - Использовать профили для переключения между алгоритмами LRU/LFU и Redis:
      - application-redis.yml для настройки Redis.

3. **Spring Security:**
  - Поддержка ролей пользователей и API для управления доступом.
    - Реализовать API для регистрации пользователей с ролями admin, journalist и subscriber.
    - Роли:
      - Admin: Полный доступ к сущностям.
      - Journalist: Добавление, изменение и удаление только своих новостей.
      - Subscriber: Добавление, изменение и удаление только своих комментариев.
      - Незарегистрированные пользователи: Только просмотр новостей и комментариев.
    - Пользователи и роли будут храниться в отдельном микросервисе с реляционной базой (PostgreSQL).
    - Информация о пользователях будет запрашиваться по REST через Feign Client.

4. **Spring Cloud Config:**
  - Централизованная конфигурация в отдельном сервисе.
    - Spring Cloud Config:
      - Вынести настройки в отдельный сервис.
      - Настроить зависимости от профиля.

5. **Генерация DTO:**
  - Планируется использование OpenAPI или Protocol Buffers для автоматической генерации DTO.
    - OpenAPI:
      - Генерация DTO и интерфейсов контроллеров с помощью OpenAPI.
    - Protocol Buffers (proto):
      - Настройки генерации DTO из .proto файлов при сборке проекта.
